# ============================================
# Discord Integration
# ============================================
# Required. Obtain from Discord: Server Settings > Integrations > Webhooks
DISCORD_WEBHOOK_URL=https://discord.com/api/webhooks/YOUR_WEBHOOK_ID/YOUR_WEBHOOK_TOKEN

# Optional. Your Discord user ID for @mentions in CRITICAL alerts.
# To find: Right-click your name in Discord > Copy ID (Developer Mode enabled)
DISCORD_OPERATOR_MENTION=

# ============================================
# Gateway Configuration
# ============================================
# Docker container name for IBKR Gateway (from Task 3.1)
GATEWAY_CONTAINER_NAME=gateway

# Hostname or IP for Gateway. Use 'gateway' if on Docker network, 'localhost' if same machine
GATEWAY_HOST=gateway

# IBKR Gateway API port (configured in Task 3.1)
GATEWAY_PORT=4002

# How long to wait for Gateway container restart command
GATEWAY_RESTART_TIMEOUT_SECONDS=30

# How many times to check if Gateway port responds after restart (12 attempts * 5s = 60s max)
GATEWAY_READY_MAX_ATTEMPTS=12

# Interval between port checks after restart
GATEWAY_READY_CHECK_INTERVAL_SECONDS=5

# ============================================
# Health Check Configuration
# ============================================
# How often to check Gateway health (every 1 minute recommended)
HEALTH_CHECK_INTERVAL_SECONDS=60

# Timeout for port connection test (allows brief unresponsiveness)
PORT_CHECK_TIMEOUT_SECONDS=3

# If monitoring encounters error, sleep longer before retrying (2 minutes)
ERROR_RECOVERY_INTERVAL_SECONDS=120

# ============================================
# Memory Thresholds
# ============================================
# 1.5 GB - Send WARNING alert when Gateway memory exceeds this
MEMORY_WARNING_MB=1536

# 1.7 GB - Send ERROR alert (near scheduled restart threshold)
MEMORY_CRITICAL_MB=1740

# ============================================
# Alert Throttling
# ============================================
# Minimum time between duplicate alerts (5 minutes prevents spam)
ALERT_COOLDOWN_SECONDS=300

# ============================================
# Bot Monitoring (Optional)
# ============================================
# Enable bot health checks (true | false). Recommended: false for MVP.
MONITOR_BOT_HEALTH=false

# Bot deployment type: none | container | heartbeat
# - none: No bot monitoring
# - container: Monitor bot Docker container
# - heartbeat: Monitor bot heartbeat file
BOT_DEPLOYMENT_MODE=none

# Docker container name for bot (if BOT_DEPLOYMENT_MODE=container)
BOT_CONTAINER_NAME=trading-bot

# Path to bot heartbeat file (if BOT_DEPLOYMENT_MODE=heartbeat)
BOT_HEARTBEAT_FILE=/data/bot_heartbeat.json

# ============================================
# System Monitoring (Optional)
# ============================================
# Enable system resource monitoring (disk, Docker daemon)
MONITOR_SYSTEM_HEALTH=false

# Disk usage warning threshold (percent)
DISK_WARNING_PERCENT=80
